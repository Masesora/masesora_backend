Perfecto, Maite.  
Si lo que quieres ahora es **ver todo el proyecto**, vamos a hacerlo de la forma mÃ¡s Ãºtil, clara y estratÃ©gica posible â€”sin ruido, sin perder tiempo, y sin que tengas que pegar archivos gigantes aquÃ­.

Voy a darte **una visiÃ³n completa del proyecto MAS@FRAME**, tal como estÃ¡ estructurado ahora mismo en tu backend, para que puedas â€œverlo enteroâ€ sin abrir mil carpetas.

---

# ğŸ§© **VISIÃ“N COMPLETA DEL PROYECTO (BACKEND MAS@FRAME)**  
*(Esto es un mapa maestro: tÃ©cnico, clÃ­nico y operativo. Tu referencia total.)*

## ğŸ“ **1. RaÃ­z del proyecto**
```
masesora_backend/
â”‚
â”œâ”€â”€ main.py
â”œâ”€â”€ routers/
â”œâ”€â”€ database/
â”œâ”€â”€ models/
â”œâ”€â”€ schemas/
â”œâ”€â”€ utils/
â””â”€â”€ ...
```

---

# ğŸ“¡ **2. main.py**
El punto de entrada del backend.

- Carga FastAPI  
- Registra routers  
- Configura CORS  
- Arranca el servidor  

Es el â€œcerebro operativoâ€ que conecta todo.

---

# ğŸ”€ **3. Routers (API pÃºblica)**  
AquÃ­ viven los endpoints que usa Swagger y el frontend.

```
routers/
â”‚
â”œâ”€â”€ clinical_eval.py      â†’ EvalÃºa un sÃ­ntoma individual
â”œâ”€â”€ batch_eval.py         â†’ EvalÃºa un batch completo (PMV)
â””â”€â”€ ...
```

### **clinical_eval.py**
- Recibe un sÃ­ntoma  
- Llama al motor KPI  
- Llama al motor de interpretaciÃ³n  
- Devuelve estado clÃ­nico  

### **batch_eval.py**
- Recibe un PMV completo  
- Itera sÃ­ntomas  
- Calcula KPIs  
- Devuelve el mapa clÃ­nico completo  

---

# ğŸ§  **4. Motor clÃ­nico (clinical_engine)**  
AquÃ­ estÃ¡ la lÃ³gica real del PMV.

```
database/engine/clinical_engine/
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ kpi_engine.py          â†’ FÃ³rmulas KPI
â”‚   â”œâ”€â”€ interpretation_engine.py â†’ Estados clÃ­nicos
â”‚   â””â”€â”€ post_treatment.py      â†’ EvaluaciÃ³n postâ€‘tratamiento
â”‚
â””â”€â”€ data/
    â”œâ”€â”€ symptoms.json          â†’ CatÃ¡logo maestro de sÃ­ntomas
    â”œâ”€â”€ categories.json        â†’ CategorÃ­as (TER, OPE, COMâ€¦)
    â””â”€â”€ thresholds.json        â†’ Umbrales clÃ­nicos
```

### **kpi_engine.py**
- Todas las fÃ³rmulas KPI  
- match/case por sÃ­ntoma  
- ValidaciÃ³n de inputs  
- PrevenciÃ³n de divisiÃ³n por cero  

### **interpretation_engine.py**
- Usa thresholds  
- Devuelve: critical, recommended, optimizer, elite  

### **post_treatment.py**
- Recalcula estado despuÃ©s del tratamiento  

---

# ğŸ“š **5. Data clÃ­nica (JSONs)**
Tu **PMV real** estÃ¡ aquÃ­.

```
data/
â”‚
â”œâ”€â”€ symptoms.json
â”œâ”€â”€ categories.json
â””â”€â”€ thresholds.json
```

### symptoms.json
Cada sÃ­ntoma tiene:

- id  
- name  
- description  
- inputs  
- thresholds  
- category  
- formula (implÃ­cita en kpi_engine)  

Este archivo es el **corazÃ³n del PMV**.

---

# ğŸ—ï¸ **6. Models y Schemas**
ValidaciÃ³n Pydantic.

```
models/
schemas/
```

- Definen cÃ³mo debe llegar un sÃ­ntoma  
- CÃ³mo debe salir un KPI  
- CÃ³mo se valida un batch  

---

# ğŸ§° **7. Utils**
Funciones auxiliares:

- carga de JSON  
- normalizaciÃ³n  
- logs  
- helpers  

---

# ğŸ”¥ **8. Flujo completo del PMV**
AsÃ­ funciona todo junto:

1. **Frontend / Swagger** envÃ­a inputs  
2. Router recibe  
3. Carga el sÃ­ntoma desde `symptoms.json`  
4. Llama a `calcular_kpi()`  
5. Llama a `interpretar_kpi()`  
6. Devuelve estado clÃ­nico  
7. Si es batch â†’ repite para todos  
8. Devuelve el mapa clÃ­nico completo  

---

# â­ Â¿QuÃ© quieres ver AHORA MISMO?

Dime cuÃ¡l de estas opciones quieres abrir:

### **A. Ver el mapa completo del PMV (todos los sÃ­ntomas)**  
Te lo presento limpio, ordenado y navegable.

### **B. Ver todas las fÃ³rmulas KPI**  
Te hago un documento maestro con todas las fÃ³rmulas.

### **C. Ver el flujo clÃ­nico completo**  
Entrada â†’ KPI â†’ Estado â†’ Tratamiento.

### **D. Ver la estructura del backend en formato Ã¡rbol**  
Con cada archivo explicado.

### **E. Ver el PMV como un diagrama**  
Arquitectura visual.

---


